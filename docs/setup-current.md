# 現在の環境での実行手順

このドキュメントでは、現在の開発環境でテスト管理システムを実行する手順を説明します。

## 前提条件

以下がインストールされていることを確認してください:

- Node.js (バージョン 18.17 以上)
- npm (Node.js に含まれています)

### Node.js のバージョン確認

PowerShell で以下のコマンドを実行:

```powershell
node --version
```

18.17 以上のバージョンが表示されれば OK です。

## 実行手順

### 1. プロジェクトディレクトリに移動

PowerShell を開き、以下のコマンドを実行:

```powershell
cd "f:\naruk\デスクトップ\app_dev\test_app\1"
```

### 2. 依存パッケージのインストール(初回のみ)

初回起動時、または`package.json`が更新された場合に実行:

```powershell
npm install
```

**所要時間**: 約 1〜3 分

### 3. 開発サーバーの起動

以下のコマンドを実行:

```powershell
npm run dev
```

正常に起動すると、以下のような表示が出ます:

```
   ▲ Next.js 15.5.6
   - Local:        http://localhost:3000
   - Network:      http://[あなたのIPアドレス]:3000

 ✓ Ready in 3.7s
```

### 4. ブラウザでアクセス

以下のいずれかの方法でアクセス:

**同じ PC からアクセス:**

```
http://localhost:3000
```

**同じネットワーク内の他の端末(タブレット等)からアクセス:**

```
http://[表示されたIPアドレス]:3000
```

例: `http://100.79.45.99:3000`

### 5. 動作確認

ブラウザで以下を確認:

1. 左側にサイドバーが表示される
2. サイドバーに「すべてのテスト」「中 3 数学」「中 3 英語」「中 2 国語」のフォルダが表示される
3. メインエリアに検索バーと「新規テスト登録」ボタンが表示される
4. テスト一覧がテーブル形式で表示される
5. サンプルテストデータが 6 件表示される

### 6. サーバーの停止

サーバーを停止する場合は、PowerShell で `Ctrl + C` を押す。

確認メッセージが表示された場合は `Y` を入力して Enter。

## タブレットからのアクセス方法

### 前提条件

- PC とタブレットが同じネットワーク(Wi-Fi)に接続されている
- Windows ファイアウォールで 3000 番ポートが許可されている

### 手順

1. PC で開発サーバーを起動(上記手順 3)
2. 表示された Network URL をメモ
   - 例: `http://100.79.45.99:3000`
3. タブレットのブラウザでその URL にアクセス

### ファイアウォール設定(必要な場合)

タブレットからアクセスできない場合:

1. Windows の「設定」を開く
2. 「更新とセキュリティ」→「Windows セキュリティ」→「ファイアウォールとネットワーク保護」
3. 「詳細設定」をクリック
4. 「受信の規則」→「新しい規則」
5. 以下の設定で規則を作成:
   - 規則の種類: ポート
   - プロトコル: TCP
   - ポート: 3000
   - 操作: 接続を許可する
   - プロファイル: すべて選択
   - 名前: Next.js Development Server

## トラブルシューティング

### ポート 3000 が既に使用されている

エラーメッセージ:

```
Error: listen EADDRINUSE: address already in use :::3000
```

**解決方法 1**: 別のポートを使用

```powershell
$env:PORT=3001; npm run dev
```

**解決方法 2**: 使用中のプロセスを終了

```powershell
# ポート3000を使用しているプロセスを確認
netstat -ano | findstr :3000

# 表示されたPID(プロセスID)を使用してプロセスを終了
taskkill /PID [プロセスID] /F
```

### データベースファイルが見つからない

エラーメッセージに「database」や「SQLite」が含まれる場合:

**解決方法**: data ディレクトリと DB ファイルを確認

```powershell
# dataディレクトリの確認
Test-Path "data"

# 存在しない場合は作成される(サーバー起動時に自動作成)
```

### 画面が真っ白になる

**解決方法**:

1. ブラウザのコンソールを開く(F12 キー)
2. エラーメッセージを確認
3. サーバーを再起動

```powershell
# Ctrl+Cでサーバー停止後
npm run dev
```

### 依存パッケージのエラー

エラーメッセージに「module not found」が含まれる場合:

**解決方法**:

```powershell
# node_modulesを削除して再インストール
Remove-Item -Recurse -Force node_modules
npm install
```

## 日常的な使用方法

### 毎回の起動手順

1. PowerShell を開く
2. プロジェクトディレクトリに移動
   ```powershell
   cd "f:\naruk\デスクトップ\app_dev\test_app\1"
   ```
3. サーバー起動
   ```powershell
   npm run dev
   ```
4. ブラウザでアクセス

### 終了手順

1. PowerShell で `Ctrl + C`
2. 確認メッセージで `Y` を入力

## データのバックアップ

定期的にデータベースファイルをバックアップすることを推奨します。

```powershell
# dataディレクトリ全体をコピー
Copy-Item -Path "data" -Destination "data_backup_$(Get-Date -Format 'yyyyMMdd')" -Recurse
```

## 次のステップ

- 機能追加後の動作確認
- ユーザーフィードバックの収集
- パフォーマンスの最適化

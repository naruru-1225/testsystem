# テスト管理システム 機能性・利便性向上 改善提案書

> コードベース全体を分析し、細かいものから大きなものまで改善案を網羅的にまとめました。

---

## 📄 PDFビューワー関連

### 表示・操作の改善
1. **ページジャンプ機能**: 現在は前/次ボタンのみ。ページ番号を直接入力してジャンプできるようにする
2. **ページサムネイル一覧**: サイドパネルに全ページのサムネイルを表示し、クリックでジャンプ
3. **キーボードショートカット**: ←→キーでページ移動、+/-でズーム、Escで閉じる
4. **ピンチズーム対応**: タブレットでのピンチ操作によるズームイン/アウト
5. **フィット表示モード**: 「幅に合わせる」「ページに合わせる」など表示モードの選択
6. **ダークモード**: PDFビューワー背景を暗くして目の負担を軽減するオプション
7. **回転機能**: PDFページを90度ずつ回転できるボタンの追加
8. **スクロール連続表示**: 複数ページを縦にスクロールして連続閲覧できるモード
9. **PDF内テキスト検索**: PDF内のテキストをCtrl+Fで検索できる機能

### 印刷関連
10. **ページ範囲指定印刷**: 全ページではなく、特定のページ範囲のみ印刷
11. **両面印刷設定**: 両面印刷のオン/オフ設定
12. **印刷プレビュー**: 用紙サイズ変更後の印刷プレビュー表示
13. **複数部数の指定**: 印刷部数を指定するUIの追加

### サイズ変換
14. **変換プログレス表示**: サイズ変換中にプログレスバーやスピナーを表示
15. **A5/Letterサイズ対応**: A3/A4/B4/B5以外の用紙サイズも追加
16. **カスタムサイズ入力**: 任意のmm指定でのサイズ変換

---

## 📝 テスト登録・編集フォーム

### 入力の効率化
17. **フォームの自動保存**: 入力中のデータを定期的にlocalStorageに保存、ブラウザ閉じても復元
18. **前回入力値の引継ぎ**: 連続登録時に科目・学年・フォルダを前回と同じ値で初期化
19. **テンプレート機能**: よく使う科目・学年・フォルダの組み合わせをテンプレートとして保存
20. **ドラッグ&ドロップによる一括登録**: 複数PDFを一度にドロップして一括登録
21. **PDFファイル名からの自動入力**: PDFファイル名を解析して科目・学年を自動推測
22. **添付ファイルの並び替え**: 添付ファイルの表示順をドラッグで変更可能に
23. **バリデーションメッセージの改善**: どのフィールドにエラーがあるかをフォーム上で視覚的に表示

### ファイル関連
24. **PDF以外のファイル対応強化**: Word/Excelファイルのアップロードと変換
25. **ファイルサイズ上限の表示**: アップロード前にファイルサイズ制限を明示
26. **画像の圧縮オプション**: 大きな画像をアップロード時に自動圧縮するオプション
27. **複数ファイル同時アップロード**: メインPDF + 添付ファイルを一度にまとめてアップロード
28. **アップロード進捗表示**: 大きなファイルのアップロード時にプログレスバーを表示

---

## 📋 テスト一覧（TestList）

### 表示の強化
29. **並び替え機能**: テスト名、科目、学年、登録日でカラムクリックソート
30. **表示件数の切り替え**: 10件/25件/50件/100件の表示件数切り替え
31. **ページネーション**: テスト件数が多い場合のページ分割表示
32. **カード表示モード**: テーブル表示とカード（グリッド）表示の切り替え
33. **テスト件数の表示**: 一覧上部に「検索結果: ○件」と件数を表示
34. **列のカスタマイズ**: 表示する列をユーザーが選択できる機能
35. **列幅のリサイズ**: テーブルの列幅をドラッグで調整可能に
36. **行の高さ調整**: コンパクト/標準/広めの行高さの切り替え

### 選択・操作
37. **複数選択**: チェックボックスで複数テストを選択
38. **一括操作**: 複数選択したテストの一括削除、一括フォルダ移動、一括タグ付け
39. **一括印刷**: 選択した複数テストのPDFをまとめて印刷
40. **テストの複製機能**: 既存テストをコピーして新規作成
41. **右クリックコンテキストメニュー**: 編集/削除/PDF表示などを右クリックから操作
42. **ドラッグ&ドロップでフォルダ移動**: テスト行をドラッグしてサイドバーのフォルダにドロップ

### フィルタ・検索
43. **検索ハイライト**: 検索キーワードにマッチした部分をハイライト表示
44. **詳細検索フィルタ**: 登録日範囲、大問数、満点などの詳細条件で絞り込み
45. **検索履歴**: 過去の検索クエリを保存して再利用
46. **複数タグでのフィルタ**: 複数のタグを同時に選択してAND/OR検索
47. **フィルタのプリセット保存**: よく使う検索条件を名前付きで保存

---

## 📁 サイドバー・フォルダ管理

48. **フォルダ内テスト件数表示**: フォルダ名の横にテスト件数をバッジで表示
49. **フォルダの色分け**: フォルダごとに色を設定して視認性を向上
50. **フォルダのアイコン設定**: カスタムアイコンをフォルダに設定
51. **フォルダの検索**: フォルダ名で検索してフィルタリング
52. **フォルダの一括展開/折りたたみ**: すべてのフォルダを一度に展開/折りたたみ
53. **ドラッグでフォルダの階層移動**: フォルダを別のフォルダにドラッグして階層変更
54. **お気に入りフォルダ**: よく使うフォルダをお気に入りとしてサイドバー上部にピン止め
55. **最近使ったフォルダ**: 最近アクセスしたフォルダを表示するセクション

---

## 🏷️ タグ・ラベル管理

56. **タグの使用頻度表示**: タグ選択時に使用件数を表示
57. **タグのグループ化**: タグをカテゴリ別にグループ化（例: 「種別」「年度」）
58. **タグの一括付与・削除**: 複数テストに対してタグを一括操作
59. **タグのマージ**: 似たタグを統合する機能
60. **スマートタグ**: 条件に基づいてテストを自動でタグ付け（例: 「今月登録」）
61. **タグの色をカスタマイズ**: タグ作成時に色をパレットから選択

---

## 📊 ダッシュボード

62. **期間フィルタ**: 今月/先月/今学期/今年度などの期間でデータをフィルタ
63. **登録推移グラフ**: 日別/週別/月別のテスト登録数の推移グラフ
64. **科目別カバー率**: 各学年にどの科目のテストが揃っているかの一覧表
65. **ストレージ使用量**: アップロードされたPDFの合計容量の表示
66. **ダッシュボードのカスタマイズ**: ウィジェットの表示/非表示、配置変更
67. **CSVダウンロード一覧表示**: ダッシュボードからテストリストのCSVを直接ダウンロード

---

## ⚙️ 管理画面（AdminModal）

### マスターデータ管理
68. **学年・科目の並び替え**: ドラッグ&ドロップで表示順を直感的に変更
69. **学年・科目の使用件数表示**: 各学年/科目がいくつのテストで使われているかを表示
70. **使用中のマスターデータの削除防止強化**: 使用中のアイテム削除時に代替先の選択UI
71. **マスターデータのインポート/エクスポート**: 学年・科目・タグのCSV一括操作

### バックアップ・復元
72. **自動バックアップの設定UI**: バックアップ頻度（毎日/毎週）の設定画面
73. **バックアップ履歴一覧**: 過去のバックアップ一覧と復元ポイント選択
74. **差分復元**: 全テスト復元ではなく、特定のテストのみ選択して復元
75. **クラウドバックアップ**: Google Drive等へのバックアップ連携

---

## 📧 メール自動取り込み

76. **取り込みルール設定**: 件名や送信元アドレスに基づいて、自動でフォルダ・科目・学年を振り分け
77. **取り込みフィルタ**: 特定の送信元のみ取り込む/除外するフィルタ
78. **取り込み通知**: 新しいテストが自動取り込みされたときにUI上に通知バッジ表示
79. **取り込みエラーの再試行**: エラーになった取り込みを手動で再試行するボタン
80. **重複チェックの強化**: 同一ファイル名だけでなく、PDFの内容ハッシュで重複を検知
81. **取り込み後の自動分類**: AIで科目・学年を推定して自動分類（将来的）

---

## 🖥️ UI/UX全般

### レスポンシブ・アクセシビリティ
82. **ダークモード対応**: システム/手動のダークモード切り替え
83. **フォントサイズ調整**: UIのフォントサイズを小/中/大で切り替え
84. **モバイル特化のレイアウト**: スマートフォン向けのシンプルなレイアウト
85. **スワイプジェスチャー**: テスト一覧をスワイプで削除や編集
86. **アクセシビリティ改善**: aria属性の追加、スクリーンリーダー対応

### フィードバック・通知
87. **操作完了のトースト通知**: 登録/編集/削除の完了をトースト通知で表示
88. **ローディングスケルトン**: データ読み込み中のスケルトン画面（現在は「読み込み中...」テキストのみ）
89. **エラー時のリトライボタン**: データ取得エラー時に「再試行」ボタンを表示
90. **確認ダイアログの統一**: 削除確認をインラインからモーダルダイアログに統一

### ナビゲーション
91. **ブラウザ戻るボタン対応**: PDFビューワーや管理画面を開いた状態でブラウザの「戻る」が正しく動作
92. **URLパラメータによる状態復元**: フォルダ・フィルタの選択状態をURLに反映し、共有やブックマーク可能に
93. **キーボードナビゲーション**: Tab/Enterキーでの操作、フォーカス管理の改善
94. **ショートカットキーヘルプ**: 使用可能なキーボードショートカットの一覧表示（?キー）

---

## 🔧 パフォーマンス

95. **仮想スクロール**: テスト件数が多い場合に仮想スクロールで表示パフォーマンスを向上
96. **画像の遅延読み込み**: 添付画像のLazy Loading対応
97. **API レスポンスのキャッシュ**: SWR/React Queryを使ったクライアントサイドキャッシュ
98. **PDFのストリーミング表示**: 大きなPDFファイルのストリーミング読み込み
99. **バンドルサイズの最適化**: dynamic importによるコンポーネントの遅延読み込み
100. **サーバーサイドのページネーション**: テスト一覧のAPIにページネーション追加

---

## 🔒 セキュリティ・堅牢性

101. **入力値のサニタイズ強化**: XSS対策の入力チェック全般の強化
102. **ファイルタイプの厳密チェック**: アップロード時のMIMEタイプ + マジックナンバー検証
103. **アクセスログ**: 操作履歴（誰がいつ何をしたか）の記録
104. **操作の取り消し（Undo）**: 削除などの操作を一定時間内に取り消せる機能
105. **同時編集の競合防止**: 同じテストを複数ユーザーが編集した場合の競合検知

---

## 📤 エクスポート・連携

106. **PDF一括ダウンロード**: 選択した複数テストのPDFをZIPにまとめてダウンロード
107. **Excel形式でのエクスポート**: CSV以外にXLSX形式でのエクスポート
108. **テスト情報の印刷用レイアウト**: テスト一覧をきれいな印刷レイアウトで出力
109. **QRコード生成**: 各テストの閲覧URLをQRコードで生成・印刷
110. **カレンダー連携**: テストの実施日をGoogleカレンダー等に登録

---

## 💡 その他の細かいUX改善

111. **空状態の改善**: テストが0件の時に「テストを登録しましょう！」と案内表示
112. **ツールチップの充実**: 各ボタンやアイコンにツールチップ説明を追加
113. **テスト名のインライン編集**: 一覧画面からテスト名をクリックして直接編集
114. **メモのインライン編集**: 一覧画面のメモ列をクリックして直接編集可能に
115. **最終更新日時の表示**: テスト一覧に作成日だけでなく更新日時も表示
116. **テストのお気に入り機能**: よく使うテストにスター/お気に入りマーク
117. **最近閲覧したテスト**: 最近PDFを閲覧したテストの履歴
118. **テスト間のリンク**: 関連するテスト同士をリンクで結ぶ機能
119. **コメント・メモ機能**: テストに対してコメントを複数追加できる機能（掲示板的）
120. **テストの差し替え**: PDFだけを差し替える専用ボタン（編集画面を開かずに）
121. **ドラッグでCSVインポート**: CSVファイルをドラッグ&ドロップでテストを一括インポート
122. **ファイル名の一括リネーム**: 添付ファイル名を規則に基づいて一括変更
123. **メモの書式設定**: メモ欄でマークダウンや太字/色付きテキストに対応
124. **テストデータの変更履歴**: テストの編集履歴を記録し、差分を確認可能に
